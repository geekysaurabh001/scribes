server {
    listen       80;          # Listen on port 80 (HTTP)
    server_name  localhost;   # Respond to requests for 'localhost'
    root         /var/www/html/public;  # Set document root directory
    index        index.php;    # Default index file

    location ~ \.php$ {      # Handle all .php files
        fastcgi_pass   app:9000;    # Forward PHP requests to PHP-FPM container/service named 'app' on port 9000
        fastcgi_index  index.php;   # Default index file for PHP
        fastcgi_param  REQUEST_METHOD $request_method;  # Pass HTTP method to PHP
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;  # Set the correct script path
        include        fastcgi_params;  # Include standard FastCGI parameters
    }

    location / {
        try_files $uri $uri/ /index.php?$query_string;  # URL rewriting for clean URLs
    }
}
